<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deal Business - Électronique & Formation Import</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary: #6466cf;
        --secondary: #8663d8;
        --accent: #f59e0b;
        --success: #10b981;
        --danger: #ef4444;
        --dark: #415169;
        --light: #f8fafc;
        --glassmorphism: rgba(255, 255, 255, 0.15);
        --glassmorphism-border: rgba(139, 92, 246, 0.3);
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #323269 0%,
          #1a1a3e 25%,
          #2d2d5f 50%,
          #404080 75%,
          #5a5aa1 100%
        );
        min-height: 100vh;
        color: white;
      }

      /* Animated Background */
      .bg-animated {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(99, 102, 241, 0.2) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(139, 92, 246, 0.2) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(245, 158, 11, 0.15) 0%,
            transparent 50%
          );
        animation: backgroundMove 20s ease-in-out infinite;
      }

      @keyframes backgroundMove {
        0%,
        100% {
          transform: scale(1) rotate(0deg);
        }
        25% {
          transform: scale(1.1) rotate(90deg);
        }
        50% {
          transform: scale(1.2) rotate(180deg);
        }
        75% {
          transform: scale(1.1) rotate(270deg);
        }
      }

      /* Custom Navbar */
      .navbar-custom {
        background: rgba(15, 15, 35, 0.95) !important;
        backdrop-filter: blur(20px);
        border-bottom: 2px solid var(--glassmorphism-border);
        box-shadow: 0 2px 20px rgba(99, 102, 241, 0.2);
      }

      .navbar-brand {
        font-size: 1.8rem;
        font-weight: 800;
        background: linear-gradient(45deg, #6366f1, #8b5cf6, #f59e0b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* User Avatar */
      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        font-weight: 700;
        color: white;
        cursor: pointer;
        position: relative;
        border: 2px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        margin-right: 0.5rem;
      }

      .user-avatar:hover {
        transform: scale(1.1);
        border-color: var(--accent);
        box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
      }

      .user-avatar::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        width: calc(100% + 4px);
        height: calc(100% + 4px);
        border-radius: 50%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: rotate 3s linear infinite;
        z-index: -1;
      }

      /* Dropdown pour l'avatar */
      .user-dropdown {
        min-width: 200px;
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(20px);
        border: 2px solid var(--primary);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .user-dropdown .dropdown-item {
        color: white;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        margin: 0.2rem 0.5rem;
        transition: all 0.3s ease;
        border: 1px solid transparent;
      }

      .user-dropdown .dropdown-item:hover {
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        color: white;
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateX(5px);
      }

      .user-dropdown .dropdown-divider {
        border-color: var(--primary);
        margin: 0.5rem 0;
      }

      /* Glassmorphism Cards */
      .glass-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 2px solid var(--glassmorphism-border);
        border-radius: 20px;
        transition: all 0.4s ease;
        box-shadow: 0 5px 20px rgba(99, 102, 241, 0.1);
        overflow: hidden;
      }

      .glass-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 60px rgba(99, 102, 241, 0.3);
        border-color: var(--secondary);
      }

      .main-content-offset {
        margin-top: 5rem;
      }

      /* Hero Section */
      .hero-section {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 2px solid var(--glassmorphism-border);
        border-radius: 24px;
        padding: 4rem 2rem;
        margin: 2rem 0;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .hero-section::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(99, 102, 241, 0.1),
          transparent
        );
        animation: rotate 20s linear infinite;
        z-index: -1;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .hero-title {
        font-size: 3.5rem;
        font-weight: 900;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, #6366f1, #8b5cf6, #f59e0b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Custom Buttons */
      .btn-custom {
        padding: 0.8rem 2rem;
        border-radius: 16px;
        font-weight: 700;
        border: 2px solid;
        background: transparent;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .btn-custom::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        transition: left 0.4s ease;
        z-index: -1;
      }

      .btn-custom:hover::before {
        left: 0;
      }

      .btn-primary-custom {
        color: var(--primary);
        border-color: var(--primary);
      }

      .btn-primary-custom::before {
        background: linear-gradient(45deg, var(--primary), var(--secondary));
      }

      .btn-primary-custom:hover {
        color: white;
        transform: translateY(-3px);
      }

      .btn-success-custom {
        color: var(--success);
        border-color: var(--success);
      }

      .btn-success-custom::before {
        background: linear-gradient(45deg, var(--success), #059669);
      }

      .btn-success-custom:hover {
        color: white;
        transform: translateY(-3px);
      }

      /* Product Cards */
      .product-card {
        height: 100%;
        position: relative;
      }

      .product-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transform: translateX(-100%);
        transition: transform 0.6s ease;
        z-index: 1;
        pointer-events: none;
      }

      .product-card:hover::before {
        transform: translateX(100%);
      }

      .product-image {
        height: 200px;
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4rem;
        border-radius: 16px 16px 0 0;
        position: relative;
        overflow: hidden;
      }

      .product-image::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 255, 255, 0.15),
          transparent
        );
        animation: cardRotate 8s linear infinite;
      }

      @keyframes cardRotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .product-price {
        font-size: 1.8rem;
        font-weight: 900;
        background: linear-gradient(45deg, var(--accent), var(--success));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Sidebar */
      .sidebar-custom {
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(20px);
        border-right: 2px solid var(--glassmorphism-border);
        height: 100vh;
        position: fixed;
        top: 74px;
        left: 0;
        width: 280px;
        z-index: 1000;
        transition: transform 0.3s ease;
        overflow-y: auto;
      }

      /* Sidebar visible par défaut sur desktop */
      @media (min-width: 993px) {
        .sidebar-custom {
          transform: translateX(0);
        }
        .main-content-offset {
          margin-left: 280px;
        }
      }

      /* Sidebar cachée par défaut sur mobile */
      @media (max-width: 992px) {
        .sidebar-custom {
          transform: translateX(-100%);
          width: 100%;
        }
        .sidebar-custom.show {
          transform: translateX(0);
        }
        .main-content-offset {
          margin-left: 0;
        }
      }

      .nav-link-custom {
        color: white;
        padding: 0.8rem 1rem;
        border-radius: 12px;
        margin-bottom: 0.5rem;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        cursor: pointer;
      }

      .nav-link-custom::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        transition: left 0.3s ease;
        z-index: -1;
      }

      .nav-link-custom:hover::before,
      .nav-link-custom.active::before {
        left: 0;
      }

      .nav-link-custom:hover,
      .nav-link-custom.active {
        color: white;
        border-color: var(--primary);
        transform: translateX(5px);
      }

      /* Filter Pills */
      .filter-pill {
        background: transparent;
        border: 2px solid var(--primary);
        color: var(--primary);
        padding: 0.6rem 1.2rem;
        border-radius: 20px;
        margin: 0.2rem;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        cursor: pointer;
      }

      .filter-pill::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: var(--primary);
        transition: left 0.4s ease;
        z-index: -1;
      }

      .filter-pill:hover::before,
      .filter-pill.active::before {
        left: 0;
      }

      .filter-pill:hover,
      .filter-pill.active {
        color: white;
        transform: translateY(-2px);
      }

      /* Cart Badge */
      .cart-badge {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* Modal Customization */
      .modal-content-custom {
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(20px);
        border: 2px solid var(--primary);
        border-radius: 24px;
        color: white;
      }

      .form-control-custom {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 2px solid var(--primary);
        border-radius: 12px;
        color: white;
        padding: 0.75rem;
      }

      .form-control-custom:focus {
        background: rgba(255, 255, 255, 0.15);
        border-color: var(--secondary);
        box-shadow: 0 0 0 0.2rem rgba(139, 92, 246, 0.25);
        color: white;
      }

      .form-control-custom::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      /* Offcanvas */
      .offcanvas-custom {
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(20px);
        border-left: 2px solid var(--primary);
        color: white;
      }

      /* Status Badges */
      .status-pending {
        background: transparent;
        color: var(--accent);
        border: 2px solid var(--accent);
      }

      .status-completed {
        background: transparent;
        color: var(--success);
        border: 2px solid var(--success);
      }

      .status-cancelled {
        background: transparent;
        color: var(--danger);
        border: 2px solid var(--danger);
      }

      /* FAQ Accordion */
      .accordion-custom .accordion-item {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border: 2px solid var(--glassmorphism-border);
        border-radius: 15px;
        margin-bottom: 1rem;
      }

      .accordion-custom .accordion-button {
        background: transparent;
        color: white;
        border: none;
      }

      .accordion-custom .accordion-button:focus {
        box-shadow: none;
        border-color: var(--primary);
      }

      .accordion-custom .accordion-body {
        background: transparent;
        color: rgba(255, 255, 255, 0.8);
      }

      /* Profile Section */
      .profile-avatar-lg {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: white;
        margin: 0 auto 1rem;
        position: relative;
        overflow: hidden;
      }

      .profile-avatar-lg::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        animation: rotate 3s linear infinite;
      }

      /* Search Bar */
      .search-container {
        position: relative;
      }

      .search-input {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 2px solid var(--primary);
        border-radius: 25px;
        color: white;
        padding-left: 3rem;
      }

      .search-input:focus {
        background: rgba(255, 255, 255, 0.15);
        border-color: var(--secondary);
        box-shadow: 0 0 0 0.2rem rgba(139, 92, 246, 0.25);
        color: white;
      }

      .search-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .search-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--primary);
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .hero-title {
          font-size: 2rem;
        }

        .hero-section {
          padding: 2rem 1rem;
        }
      }

      /* Utility classes */
      .main-content-offset {
        transition: margin-left 0.3s ease;
      }

      .text-gradient {
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Loading animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(15, 23, 42, 0.5);
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        border-radius: 3px;
      }

      .cart-item {
        border-bottom: 1px solid var(--glassmorphism-border);
        padding: 1rem 0;
      }

      .cart-empty {
        text-align: center;
        padding: 2rem;
        color: rgba(255, 255, 255, 0.7);
      }

      .order-card {
        margin-bottom: 1rem;
      }

      .carousel-item {
        height: 100%;
      }

      .carousel-item .glass-card:hover {
        transform: scale(1);
      }
    </style>
  </head>
  <body>
    <div class="bg-animated"></div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
      <div class="container-fluid">
        <button
          class="btn btn-outline-primary me-3 d-lg-none"
          type="button"
          onclick="toggleSidebar()"
        >
          <i class="bi bi-list"></i>
        </button>

        <a class="navbar-brand" href="#" onclick="showSection('home')">
          Deal Business
        </a>

        <!-- Search Bar visible uniquement sur écran large -->
        <div
          class="search-container mx-auto d-none d-lg-block"
          style="max-width: 400px"
        >
          <i class="bi bi-search search-icon"></i>
          <input
            type="text"
            class="form-control search-input"
            id="searchInput"
            placeholder="Rechercher des produits..."
            oninput="filterProducts()"
          />
        </div>

        <!-- User Actions visible sur écrans larges -->
        <div class="d-flex align-items-center d-none d-lg-flex">
          <!-- Auth Section -->
          <div id="authSection">
            <button
              class="btn btn-primary-custom btn-custom me-2"
              onclick="openAuthModal()"
              id="authBtn"
            >
              <span id="authBtnText">Connexion</span>
            </button>
          </div>

          <!-- User Avatar (hidden by default) -->
          <div id="userSection" class="dropdown d-none">
            <div class="user-avatar" data-bs-toggle="dropdown" id="userAvatar">
              JD
            </div>
            <ul class="dropdown-menu user-dropdown">
              <li>
                <a class="dropdown-item" onclick="showSection('profile')">
                  <i class="bi bi-person me-2"></i>Mon Profil
                </a>
              </li>
              <li>
                <a class="dropdown-item" onclick="showSection('orders')">
                  <i class="bi bi-box me-2"></i>Mes Commandes
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" onclick="logout()">
                  <i class="bi bi-box-arrow-right me-2"></i>Déconnexion
                </a>
              </li>
            </ul>
          </div>

          <!-- Cart visible sur écrans larges -->
          <button
            class="btn btn-primary-custom btn-custom position-relative"
            onclick="toggleCart()"
          >
            <i class="bi bi-cart"></i>
            <span
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-badge"
              id="cartCount"
              >0</span
            >
          </button>
        </div>

        <div class="d-flex align-items-center d-lg-none">
          <button
            class="btn btn-primary-custom btn-custom"
            onclick="toggleOffcanvas()"
          >
            <i class="bi bi-person"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Offcanvas -->
    <div
      class="offcanvas offcanvas-end offcanvas-custom"
      tabindex="-1"
      id="offcanvasMenu"
    >
      <div class="offcanvas-header border-bottom border-primary">
        <h5 class="offcanvas-title">Mon espace</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="offcanvas"
        ></button>
      </div>
      <div class="offcanvas-body">
        <!-- Search Bar -->
        <div class="search-container mb-3">
          <i class="bi bi-search search-icon"></i>
          <input
            type="text"
            class="form-control search-input"
            id="offcanvasSearchInput"
            placeholder="Rechercher des produits..."
            oninput="filterProducts()"
          />
        </div>

        <div class="d-flex flex-column">
          <!-- Auth Section Mobile -->
          <div id="authSectionMobile" class="mb-3">
            <button
              class="btn btn-primary-custom btn-custom w-100"
              onclick="openAuthModal()"
            >
              <span id="authBtnTextMobile">Connexion</span>
            </button>
          </div>

          <!-- User Section Mobile (hidden by default) -->
          <div id="userSectionMobile" class="mb-3 d-none">
            <div class="glass-card p-3 mb-2">
              <div class="d-flex align-items-center">
                <div class="user-avatar me-2" id="userAvatarMobile">JD</div>
                <div>
                  <div class="fw-bold" id="userNameMobile">John Doe</div>
                  <small class="text-white-50" id="userEmailMobile"
                    >john@example.com</small
                  >
                </div>
              </div>
            </div>
            <button
              class="btn btn-outline-danger btn-sm w-100"
              onclick="logout()"
            >
              <i class="bi bi-box-arrow-right me-2"></i>Déconnexion
            </button>
          </div>

          <!-- Cart Button -->
          <button
            class="btn btn-primary-custom btn-custom"
            onclick="toggleCart()"
          >
            <i class="bi bi-cart"></i> Panier
            <span id="cartCountMobile">0</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar-custom" id="sidebar">
      <div class="p-4">
        <h6 class="text-uppercase fw-bold text-muted mb-3">Navigation</h6>
        <div class="nav flex-column">
          <a
            class="nav-link-custom active"
            onclick="showSection('home')"
            id="nav-home"
          >
            <i class="bi bi-house me-2"></i>Accueil
          </a>
          <a
            class="nav-link-custom"
            onclick="showSection('products')"
            id="nav-products"
          >
            <i class="bi bi-phone me-2"></i>Produits
          </a>
          <a
            class="nav-link-custom"
            onclick="showSection('formations')"
            id="nav-formations"
          >
            <i class="bi bi-mortarboard me-2"></i>Formations
          </a>
          <a
            class="nav-link-custom"
            onclick="showSection('about')"
            id="nav-about"
          >
            <i class="bi bi-info-circle me-2"></i>À propos
          </a>
          <a class="nav-link-custom" onclick="showSection('faq')" id="nav-faq">
            <i class="bi bi-question-circle me-2"></i>FAQ
          </a>
          <a
            class="nav-link-custom"
            onclick="showSection('contact')"
            id="nav-contact"
          >
            <i class="bi bi-telephone me-2"></i>Contact
          </a>
        </div>

        <h6 class="text-uppercase fw-bold text-muted mb-3 mt-4">Compte</h6>
        <div class="nav flex-column">
          <a class="nav-link-custom" onclick="showSection('profile')">
            <i class="bi bi-person me-2"></i>Mon Profil
          </a>
          <a class="nav-link-custom" onclick="showSection('orders')">
            <i class="bi bi-box me-2"></i>Mes Commandes
          </a>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content-offset">
      <div class="container-fluid p-4">
        <!-- Home Section -->
        <section class="content-section" id="home">
          <div class="hero-section">
            <h1 class="hero-title">Deal Business 🚀</h1>
            <p class="lead mb-4 text-white-50">
              Votre partenaire de confiance pour l'électronique et la formation
              en importation. Découvrez nos produits premium et nos formations
              exclusives pour dominer le marché ! 💯
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
              <button
                class="btn btn-primary-custom btn-custom"
                onclick="showSection('products')"
              >
                <i class="bi bi-shop me-2"></i>Shop Now
              </button>
              <button
                class="btn btn-success-custom btn-custom"
                onclick="showSection('formations')"
              >
                <i class="bi bi-mortarboard me-2"></i>Formations
              </button>
            </div>
          </div>

          <h2 class="text-center mb-5 text-gradient fw-bold">
            🔥 Produits Tendance
          </h2>
          <div
            id="featuredProductsCarousel"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-inner" id="featuredProducts">
              <!-- Les produits seront chargés ici -->
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#featuredProductsCarousel"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Précédent</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#featuredProductsCarousel"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Suivant</span>
            </button>
          </div>
        </section>

        <!-- Products Section -->
        <section class="content-section d-none" id="products">
          <h2 class="text-center mb-5 text-gradient fw-bold">
            📱 Nos Produits
          </h2>

          <!-- Filter Pills -->
          <div class="d-flex flex-wrap justify-content-center mb-4">
            <button
              class="filter-pill active"
              onclick="filterByCategory('all')"
            >
              Tous
            </button>
            <button
              class="filter-pill"
              onclick="filterByCategory('smartphones')"
            >
              Smartphones
            </button>
            <button class="filter-pill" onclick="filterByCategory('laptops')">
              Ordinateurs
            </button>
            <button
              class="filter-pill"
              onclick="filterByCategory('accessories')"
            >
              Accessoires
            </button>
            <button class="filter-pill" onclick="filterByCategory('gaming')">
              Gaming
            </button>
          </div>

          <div class="row g-4" id="productsGrid">
            <!-- Products will be loaded here -->
          </div>
        </section>

        <!-- Formations Section -->
        <section class="content-section d-none" id="formations">
          <h2 class="text-center mb-5 text-gradient fw-bold">
            🎓 Nos Formations
          </h2>
          <div class="row g-4">
            <div class="col-lg-6 col-xl-3">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">📦</div>
                <div class="card-body">
                  <h5 class="card-title">Formation Import Export</h5>
                  <div class="product-price mb-3">149 €</div>
                  <p class="card-text">
                    Maîtrisez toutes les étapes de l'importation et de
                    l'exportation, de la négociation au dédouanement.
                  </p>
                  <button
                    class="btn btn-primary-custom btn-custom w-100"
                    onclick="enrollFormation('import-export')"
                  >
                    S'inscrire
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-xl-3">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">📱</div>
                <div class="card-body">
                  <h5 class="card-title">Importation de Téléphones</h5>
                  <div class="product-price mb-3">99 €</div>
                  <p class="card-text">
                    Apprenez à importer des smartphones et tablettes depuis
                    l'étranger en toute sécurité.
                  </p>
                  <button
                    class="btn btn-primary-custom btn-custom w-100"
                    onclick="enrollFormation('smartphones')"
                  >
                    S'inscrire
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-xl-3">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">💻</div>
                <div class="card-body">
                  <h5 class="card-title">Importation d'Électronique</h5>
                  <div class="product-price mb-3">129 €</div>
                  <p class="card-text">
                    Devenez expert dans l'import de matériel électronique et
                    accessoires high-tech.
                  </p>
                  <button
                    class="btn btn-primary-custom btn-custom w-100"
                    onclick="enrollFormation('electronics')"
                  >
                    S'inscrire
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-xl-3">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">💼</div>
                <div class="card-body">
                  <h5 class="card-title">Business Development</h5>
                  <div class="product-price mb-3">199 €</div>
                  <p class="card-text">
                    Développez votre réseau commercial et créez votre empire
                    d'importation.
                  </p>
                  <button
                    class="btn btn-primary-custom btn-custom w-100"
                    onclick="enrollFormation('business')"
                  >
                    S'inscrire
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Profile Section -->
        <section class="content-section d-none" id="profile">
          <div class="row justify-content-center">
            <div class="col-lg-10">
              <h2 class="text-center mb-5 text-gradient fw-bold">
                👤 Mon Profil
              </h2>

              <div class="glass-card p-4 text-center mb-4">
                <div class="profile-avatar-lg" id="profileAvatar">JD</div>
                <h3 id="profileName">John Doe</h3>
                <p class="text-white-50" id="profileEmail">
                  john.doe@example.com
                </p>
              </div>

              <div class="row g-4">
                <div class="col-md-6">
                  <div class="glass-card p-4">
                    <h5 class="text-gradient mb-3">
                      Informations Personnelles
                    </h5>
                    <p>
                      <strong>Nom:</strong>
                      <span id="displayName">John Doe</span>
                    </p>
                    <p>
                      <strong>Email:</strong>
                      <span id="displayEmail">john.doe@example.com</span>
                    </p>
                    <p>
                      <strong>Téléphone:</strong>
                      <span id="displayPhone">+237 6 00 00 00 00</span>
                    </p>
                    <p>
                      <strong>Adresse:</strong>
                      <span id="displayAddress">Douala, Cameroun</span>
                    </p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="glass-card p-4">
                    <h5 class="text-gradient mb-3">Statistiques</h5>
                    <p>
                      <strong>Commandes totales:</strong>
                      <span id="totalOrders">5</span>
                    </p>
                    <p>
                      <strong>Formations suivies:</strong>
                      <span id="totalFormations">2</span>
                    </p>
                    <p>
                      <strong>Membre depuis:</strong>
                      <span id="memberSince">Janvier 2024</span>
                    </p>
                    <p>
                      <strong>Points fidélité:</strong>
                      <span id="loyaltyPoints">250</span>
                    </p>
                    <button
                      class="btn btn-danger w-100"
                      onclick="confirmDeleteAccount()"
                    >
                      <i class="bi bi-trash me-2"></i>Supprimer mon compte
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Orders Section -->
        <section class="content-section d-none" id="orders">
          <div class="row justify-content-center">
            <div class="col-lg-10">
              <h2 class="text-center mb-5 text-gradient fw-bold">
                📦 Mes Commandes
              </h2>
              <div id="ordersContainer">
                <!-- Orders will be loaded here -->
              </div>
            </div>
          </div>
        </section>

        <!-- About Section -->
        <section class="content-section d-none" id="about">
          <h2 class="text-center mb-5 text-gradient fw-bold">ℹ️ À propos</h2>
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">🌍</div>
                <div class="card-body">
                  <h5 class="card-title">Notre Mission</h5>
                  <p class="card-text">
                    Démocratiser l'accès aux produits électroniques de qualité
                    tout en formant la prochaine génération d'entrepreneurs
                    importateurs.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">🎯</div>
                <div class="card-body">
                  <h5 class="card-title">Notre Vision</h5>
                  <p class="card-text">
                    Devenir la référence africaine en matière d'importation
                    d'électronique et de formation commerciale.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="card glass-card h-100 text-white">
                <div class="product-image">💎</div>
                <div class="card-body">
                  <h5 class="card-title">Nos Valeurs</h5>
                  <p class="card-text">
                    Qualité, transparence, innovation et accompagnement
                    personnalisé de nos clients.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- FAQ Section -->
        <section class="content-section d-none" id="faq">
          <h2 class="text-center mb-5 text-gradient fw-bold">
            ❓ Foire Aux Questions
          </h2>
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="accordion accordion-custom" id="faqAccordion">
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#faq1"
                    >
                      1. Quels types de produits vendez-vous ?
                    </button>
                  </h2>
                  <div
                    id="faq1"
                    class="accordion-collapse collapse show"
                    data-bs-parent="#faqAccordion"
                  >
                    <div class="accordion-body">
                      Nous proposons une large gamme de produits électroniques,
                      y compris des smartphones, des ordinateurs portables, et
                      des accessoires.
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#faq2"
                    >
                      2. Comment puis-je passer une commande ?
                    </button>
                  </h2>
                  <div
                    id="faq2"
                    class="accordion-collapse collapse"
                    data-bs-parent="#faqAccordion"
                  >
                    <div class="accordion-body">
                      Vous pouvez passer une commande en ajoutant des produits à
                      votre panier et en suivant les étapes de paiement.
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#faq3"
                    >
                      3. Quelle est votre politique de retour ?
                    </button>
                  </h2>
                  <div
                    id="faq3"
                    class="accordion-collapse collapse"
                    data-bs-parent="#faqAccordion"
                  >
                    <div class="accordion-body">
                      Nous acceptons les retours sous 30 jours si le produit est
                      dans son état d'origine.
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#faq4"
                    >
                      4. Comment puis-je contacter le service client ?
                    </button>
                  </h2>
                  <div
                    id="faq4"
                    class="accordion-collapse collapse"
                    data-bs-parent="#faqAccordion"
                  >
                    <div class="accordion-body">
                      Vous pouvez nous contacter par email à
                      contact@dealbusiness.com ou via WhatsApp au +237 6 00 00
                      00 00.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Contact Section -->
        <section class="content-section d-none" id="contact">
          <h2 class="text-center mb-5 text-gradient fw-bold">📞 Contact</h2>
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <p class="text-center lead mb-5 text-white-50">
                N'hésitez pas à nous contacter pour toute question ou demande
                d'information.
              </p>
              <div class="row g-4">
                <div class="col-md-4">
                  <div
                    class="card glass-card h-100 text-white text-center p-4"
                    onclick="contactVia('email')"
                    style="cursor: pointer"
                  >
                    <div class="mb-3" style="font-size: 3rem">📧</div>
                    <h5>Email</h5>
                    <p class="text-white-50">contact@dealbusiness.com</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div
                    class="card glass-card h-100 text-white text-center p-4"
                    onclick="contactVia('whatsapp')"
                    style="cursor: pointer"
                  >
                    <div class="mb-3" style="font-size: 3rem">📱</div>
                    <h5>WhatsApp</h5>
                    <p class="text-white-50">+237 6 00 00 00 00</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div
                    class="card glass-card h-100 text-white text-center p-4"
                    onclick="contactVia('location')"
                    style="cursor: pointer"
                  >
                    <div class="mb-3" style="font-size: 3rem">📍</div>
                    <h5>Adresse</h5>
                    <p class="text-white-50">Douala, Cameroun</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Auth Modal -->
    <div class="modal fade" id="authModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-content-custom">
          <div class="modal-header border-0">
            <h5 class="modal-title" id="authModalTitle">
              Rejoignez Deal Business
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <!-- Auth Choice -->
            <div id="authChoice">
              <p class="text-center mb-4 text-white-50">
                Choisissez votre mode de connexion
              </p>
              <div class="row g-3">
                <div class="col-6">
                  <button
                    class="btn btn-primary-custom btn-custom w-100"
                    onclick="showAuthForm('login')"
                  >
                    <i class="bi bi-key me-2"></i>Connexion
                  </button>
                </div>
                <div class="col-6">
                  <button
                    class="btn btn-success-custom btn-custom w-100"
                    onclick="showAuthForm('register')"
                  >
                    <i class="bi bi-person-plus me-2"></i>Inscription
                  </button>
                </div>
              </div>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="d-none">
              <button
                class="btn btn-outline-primary btn-sm mb-3"
                onclick="showAuthChoice()"
              >
                <i class="bi bi-arrow-left me-1"></i>Retour
              </button>
              <form onsubmit="handleLogin(event)">
                <div class="mb-3">
                  <label for="loginEmail" class="form-label">Email</label>
                  <input
                    type="email"
                    class="form-control form-control-custom"
                    id="loginEmail"
                    placeholder="votre@email.com"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="loginPassword" class="form-label"
                    >Mot de passe</label
                  >
                  <input
                    type="password"
                    class="form-control form-control-custom"
                    id="loginPassword"
                    placeholder="••••••••"
                    required
                  />
                </div>
                <button
                  type="submit"
                  class="btn btn-primary-custom btn-custom w-100"
                >
                  Se connecter
                </button>
              </form>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="d-none">
              <button
                class="btn btn-outline-primary btn-sm mb-3"
                onclick="showAuthChoice()"
              >
                <i class="bi bi-arrow-left me-1"></i>Retour
              </button>
              <form onsubmit="handleRegister(event)">
                <div class="mb-3">
                  <label for="registerName" class="form-label"
                    >Nom complet</label
                  >
                  <input
                    type="text"
                    class="form-control form-control-custom"
                    id="registerName"
                    placeholder="John Doe"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="registerEmail" class="form-label">Email</label>
                  <input
                    type="email"
                    class="form-control form-control-custom"
                    id="registerEmail"
                    placeholder="votre@email.com"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="registerPhone" class="form-label"
                    >Téléphone</label
                  >
                  <input
                    type="tel"
                    class="form-control form-control-custom"
                    id="registerPhone"
                    placeholder="+237 6 00 00 00 00"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="registerPassword" class="form-label"
                    >Mot de passe</label
                  >
                  <input
                    type="password"
                    class="form-control form-control-custom"
                    id="registerPassword"
                    placeholder="••••••••"
                    required
                  />
                </div>
                <button
                  type="submit"
                  class="btn btn-success-custom btn-custom w-100"
                >
                  S'inscrire
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Offcanvas -->
    <div
      class="offcanvas offcanvas-end offcanvas-custom"
      tabindex="-1"
      id="cartOffcanvas"
    >
      <div class="offcanvas-header border-bottom border-primary">
        <h5 class="offcanvas-title"><i class="bi bi-cart me-2"></i>Panier</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="offcanvas"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div id="cartItems">
          <!-- Cart items will be displayed here -->
        </div>
        <div class="glass-card p-3 text-center mb-3" id="cartTotal">
          Total: 0 €
        </div>
        <button
          class="btn btn-success w-100"
          onclick="checkout()"
          id="checkoutBtn"
        >
          <i class="bi bi-credit-card me-2"></i>Procéder au paiement
        </button>
      </div>
    </div>

    <!-- Alert Modal -->
    <div class="modal fade" id="alertModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-content-custom">
          <div class="modal-header border-0">
            <h5 class="modal-title" id="alertTitle">Titre de l'alerte</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p id="alertMessage">Message de l'alerte.</p>
          </div>
          <div class="modal-footer border-0">
            <button
              type="button"
              class="btn btn-primary-custom btn-custom"
              data-bs-dismiss="modal"
            >
              OK
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-content-custom">
          <div class="modal-header border-0">
            <h5 class="modal-title">Confirmation de Suppression</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est
              irréversible.
            </p>
          </div>
          <div class="modal-footer border-0">
            <button
              type="button"
              class="btn btn-outline-secondary"
              data-bs-dismiss="modal"
            >
              Annuler
            </button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="deleteAccount()"
            >
              Supprimer
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
      // App State
      let currentUser = null;
      let cart = [];
      let products = [];
      let filteredProducts = [];
      let currentFilter = "all";

      // Bootstrap instances
      let authModal,
        cartOffcanvas,
        alertModal,
        confirmDeleteModal,
        offcanvasMenu;

      // Initialize App
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize Bootstrap components
        authModal = new bootstrap.Modal(document.getElementById("authModal"));
        cartOffcanvas = new bootstrap.Offcanvas(
          document.getElementById("cartOffcanvas")
        );
        alertModal = new bootstrap.Modal(document.getElementById("alertModal"));
        confirmDeleteModal = new bootstrap.Modal(
          document.getElementById("confirmDeleteModal")
        );
        offcanvasMenu = new bootstrap.Offcanvas(
          document.getElementById("offcanvasMenu")
        );

        initializeProducts();
        loadFeaturedProducts();
        loadAllProducts();
        updateCartUI();

        // Check if user is logged in
        const savedUser = sessionStorage.getItem("currentUser");
        if (savedUser) {
          currentUser = JSON.parse(savedUser);
          updateAuthState();
        }

        // Load sample data if not exists
        initializeSampleData();

        // Adjust main content based on screen size
        adjustMainContent();
        window.addEventListener("resize", adjustMainContent);
      });

      // Sample Data Initialization
      function initializeSampleData() {
        if (!sessionStorage.getItem("users")) {
          const sampleUsers = [
            {
              id: 1,
              name: "John Doe",
              email: "john@example.com",
              phone: "+237 6 00 00 00 00",
              password: "123456",
              address: "Douala, Cameroun",
              memberSince: "2024",
              totalOrders: 5,
              totalFormations: 2,
              loyaltyPoints: 250,
            },
          ];
          sessionStorage.setItem("users", JSON.stringify(sampleUsers));
        }

        if (!sessionStorage.getItem("orders")) {
          const sampleOrders = [
            {
              id: 1,
              userId: 1,
              date: "2024-01-15",
              status: "completed",
              total: 1299,
              items: [{ name: "iPhone 15 Pro Max", price: 1299, quantity: 1 }],
            },
            {
              id: 2,
              userId: 1,
              date: "2024-01-20",
              status: "pending",
              total: 279,
              items: [{ name: "AirPods Pro 2", price: 279, quantity: 1 }],
            },
          ];
          sessionStorage.setItem("orders", JSON.stringify(sampleOrders));
        }
      }

      // Products Data
      function initializeProducts() {
        products = [
          {
            id: 1,
            name: "iPhone 15 Pro Max",
            price: 1299,
            category: "smartphones",
            description:
              "Le dernier iPhone avec processeur A17 Pro et appareil photo professionnel.",
            emoji: "📱",
            featured: true,
          },
          {
            id: 2,
            name: "MacBook Pro M3",
            price: 2299,
            category: "laptops",
            description:
              "Ordinateur portable ultra-performant avec puce M3 et écran Retina.",
            emoji: "💻",
            featured: true,
          },
          {
            id: 3,
            name: "AirPods Pro 2",
            price: 279,
            category: "accessories",
            description: "Écouteurs sans fil avec réduction de bruit active.",
            emoji: "🎧",
            featured: true,
          },
          {
            id: 4,
            name: "Samsung Galaxy S24 Ultra",
            price: 1399,
            category: "smartphones",
            description: "Smartphone haut de gamme avec S Pen et zoom 200x.",
            emoji: "📱",
          },
          {
            id: 5,
            name: "Gaming Laptop RTX 4080",
            price: 2799,
            category: "gaming",
            description: "PC portable gaming avec RTX 4080 et écran 240Hz.",
            emoji: "🎮",
          },
          {
            id: 6,
            name: "Wireless Charger",
            price: 49,
            category: "accessories",
            description: "Chargeur sans fil rapide compatible tous appareils.",
            emoji: "🔌",
          },
          {
            id: 7,
            name: 'iPad Pro 12.9"',
            price: 1099,
            category: "tablets",
            description:
              "Tablette professionnelle avec puce M2 et écran Liquid Retina.",
            emoji: "📱",
          },
          {
            id: 8,
            name: "Gaming Keyboard RGB",
            price: 159,
            category: "gaming",
            description:
              "Clavier mécanique gaming avec éclairage RGB personnalisable.",
            emoji: "⌨️",
          },
        ];

        filteredProducts = [...products];
      }

      // Navigation Functions
      function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll(".content-section").forEach((section) => {
          section.classList.add("d-none");
        });

        // Show target section
        document.getElementById(sectionId).classList.remove("d-none");

        // Update nav items
        document.querySelectorAll(".nav-link-custom").forEach((item) => {
          item.classList.remove("active");
        });

        // Activate corresponding nav item
        const navItem = document.getElementById(`nav-${sectionId}`);
        if (navItem) {
          navItem.classList.add("active");
        }

        // Close sidebar on mobile
        if (window.innerWidth <= 992) {
          document.getElementById("sidebar").classList.remove("show");
        }

        // Load specific data when needed
        if (sectionId === "orders" && currentUser) {
          loadOrders();
        } else if (sectionId === "profile" && currentUser) {
          updateProfileDisplay();
        }
      }

      function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("show");
      }

      function toggleOffcanvas() {
        offcanvasMenu.toggle();
      }

      function adjustMainContent() {
        const mainContent = document.querySelector(".main-content-offset");
        if (window.innerWidth <= 992) {
          mainContent.style.marginLeft = "0";
        } else {
          mainContent.style.marginLeft = "280px";
        }
      }

      // Products Functions
      function loadFeaturedProducts() {
        const featuredProducts = products.filter((p) => p.featured);
        const carousel = document.getElementById("featuredProducts");

        const chunks = [];
        for (let i = 0; i < featuredProducts.length; i += 3) {
          chunks.push(featuredProducts.slice(i, i + 3));
        }

        carousel.innerHTML = chunks
          .map(
            (chunk, index) =>
              `<div class="carousel-item ${index === 0 ? "active" : ""}">
            <div class="row g-4">
              ${chunk
                .map(
                  (product) =>
                    `<div class="col-lg-4">
                  <div class="card glass-card product-card text-white h-100">
                    <div class="product-image">${product.emoji}</div>
                    <div class="card-body">
                      <h5 class="card-title">${product.name}</h5>
                      <div class="product-price mb-3">${product.price} €</div>
                      <p class="card-text">${product.description}</p>
                      <button class="btn btn-primary-custom btn-custom w-100" onclick="addToCart(${product.id})">
                        <i class="bi bi-cart-plus me-2"></i>Ajouter au panier
                      </button>
                    </div>
                  </div>
                </div>`
                )
                .join("")}
            </div>
          </div>`
          )
          .join("");
      }

      function loadAllProducts() {
        displayProducts(filteredProducts);
      }

      function displayProducts(productsToShow) {
        const grid = document.getElementById("productsGrid");
        grid.innerHTML = productsToShow
          .map(
            (product) =>
              `<div class="col-lg-6 col-xl-3">
            <div class="card glass-card product-card text-white h-100">
              <div class="product-image">${product.emoji}</div>
              <div class="card-body">
                <h5 class="card-title">${product.name}</h5>
                <div class="product-price mb-3">${product.price} €</div>
                <p class="card-text">${product.description}</p>
                <button class="btn btn-primary-custom btn-custom w-100" onclick="addToCart(${product.id})">
                  <i class="bi bi-cart-plus me-2"></i>Ajouter au panier
                </button>
              </div>
            </div>
          </div>`
          )
          .join("");
      }

      function filterByCategory(category) {
        currentFilter = category;

        // Update filter pills
        document.querySelectorAll(".filter-pill").forEach((pill) => {
          pill.classList.remove("active");
        });
        event.target.classList.add("active");

        // Filter products
        if (category === "all") {
          filteredProducts = [...products];
        } else {
          filteredProducts = products.filter((p) => p.category === category);
        }

        displayProducts(filteredProducts);
      }

      function filterProducts() {
        const searchTerm =
          document.getElementById("searchInput")?.value.toLowerCase() ||
          document
            .getElementById("offcanvasSearchInput")
            ?.value.toLowerCase() ||
          "";

        let filtered =
          currentFilter === "all"
            ? [...products]
            : products.filter((p) => p.category === currentFilter);

        if (searchTerm) {
          filtered = filtered.filter(
            (p) =>
              p.name.toLowerCase().includes(searchTerm) ||
              p.description.toLowerCase().includes(searchTerm)
          );
        }

        filteredProducts = filtered;
        displayProducts(filteredProducts);
      }

      // Cart Functions
      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const existingItem = cart.find((item) => item.id === productId);
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ ...product, quantity: 1 });
        }

        updateCartUI();
        showAlert("Succès", `${product.name} ajouté au panier !`);
      }

      function removeFromCart(productId) {
        cart = cart.filter((item) => item.id !== productId);
        updateCartUI();
      }

      function updateQuantity(productId, newQuantity) {
        if (newQuantity <= 0) {
          removeFromCart(productId);
          return;
        }

        const item = cart.find((item) => item.id === productId);
        if (item) {
          item.quantity = newQuantity;
          updateCartUI();
        }
      }

      function updateCartUI() {
        const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
        const cartTotal = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );

        // Update cart count badges
        document.getElementById("cartCount").textContent = cartCount;
        document.getElementById("cartCountMobile").textContent = cartCount;

        // Update cart items display
        const cartItems = document.getElementById("cartItems");
        if (cart.length === 0) {
          cartItems.innerHTML = `
            <div class="cart-empty">
              <i class="bi bi-cart-x" style="font-size: 3rem;"></i>
              <p class="mt-3">Votre panier est vide</p>
            </div>`;
        } else {
          cartItems.innerHTML = cart
            .map(
              (item) => `
            <div class="cart-item">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h6>${item.name}</h6>
                  <small class="text-white-50">${item.price} € × ${
                item.quantity
              }</small>
                </div>
                <div class="d-flex align-items-center gap-2">
                  <button class="btn btn-sm btn-outline-primary" onclick="updateQuantity(${
                    item.id
                  }, ${item.quantity - 1})">-</button>
                  <span>${item.quantity}</span>
                  <button class="btn btn-sm btn-outline-primary" onclick="updateQuantity(${
                    item.id
                  }, ${item.quantity + 1})">+</button>
                  <button class="btn btn-sm btn-outline-danger ms-2" onclick="removeFromCart(${
                    item.id
                  })">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          `
            )
            .join("");
        }

        // Update total
        document.getElementById(
          "cartTotal"
        ).textContent = `Total: ${cartTotal} €`;

        // Enable/disable checkout button
        const checkoutBtn = document.getElementById("checkoutBtn");
        checkoutBtn.disabled = cart.length === 0;
      }

      function toggleCart() {
        cartOffcanvas.toggle();
      }

      function checkout() {
        if (cart.length === 0) return;

        if (!currentUser) {
          showAlert(
            "Connexion requise",
            "Veuillez vous connecter pour passer commande."
          );
          cartOffcanvas.hide();
          setTimeout(() => openAuthModal(), 500);
          return;
        }

        const total = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        const orderId = Date.now();

        // Create new order
        const newOrder = {
          id: orderId,
          userId: currentUser.id,
          date: new Date().toISOString().split("T")[0],
          status: "pending",
          total: total,
          items: cart.map((item) => ({
            name: item.name,
            price: item.price,
            quantity: item.quantity,
          })),
        };

        // Save order
        const orders = JSON.parse(sessionStorage.getItem("orders") || "[]");
        orders.push(newOrder);
        sessionStorage.setItem("orders", JSON.stringify(orders));

        // Update user stats
        currentUser.totalOrders += 1;
        currentUser.loyaltyPoints += Math.floor(total / 10);
        sessionStorage.setItem("currentUser", JSON.stringify(currentUser));

        // Update users data
        const users = JSON.parse(sessionStorage.getItem("users") || "[]");
        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex >= 0) {
          users[userIndex] = currentUser;
          sessionStorage.setItem("users", JSON.stringify(users));
        }

        // Clear cart
        cart = [];
        updateCartUI();
        cartOffcanvas.hide();

        showAlert(
          "Commande confirmée",
          `Votre commande #${orderId} a été confirmée ! Total: ${total} €`
        );

        // Update profile if on profile page
        updateProfileDisplay();
      }

      // Authentication Functions
      function openAuthModal() {
        showAuthChoice();
        authModal.show();
      }

      function showAuthChoice() {
        document.getElementById("authChoice").classList.remove("d-none");
        document.getElementById("loginForm").classList.add("d-none");
        document.getElementById("registerForm").classList.add("d-none");
        document.getElementById("authModalTitle").textContent =
          "Rejoignez Deal Business";
      }

      function showAuthForm(type) {
        document.getElementById("authChoice").classList.add("d-none");

        if (type === "login") {
          document.getElementById("loginForm").classList.remove("d-none");
          document.getElementById("registerForm").classList.add("d-none");
          document.getElementById("authModalTitle").textContent = "Connexion";
        } else {
          document.getElementById("loginForm").classList.add("d-none");
          document.getElementById("registerForm").classList.remove("d-none");
          document.getElementById("authModalTitle").textContent = "Inscription";
        }
      }

      function handleLogin(event) {
        event.preventDefault();

        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        const users = JSON.parse(sessionStorage.getItem("users") || "[]");
        const user = users.find(
          (u) => u.email === email && u.password === password
        );

        if (user) {
          currentUser = user;
          sessionStorage.setItem("currentUser", JSON.stringify(currentUser));
          updateAuthState();
          authModal.hide();
          showAlert("Connexion réussie", `Bienvenue ${user.name} !`);
        } else {
          showAlert("Erreur", "Email ou mot de passe incorrect.");
        }
      }

      function handleRegister(event) {
        event.preventDefault();

        const name = document.getElementById("registerName").value;
        const email = document.getElementById("registerEmail").value;
        const phone = document.getElementById("registerPhone").value;
        const password = document.getElementById("registerPassword").value;

        const users = JSON.parse(sessionStorage.getItem("users") || "[]");

        // Check if user already exists
        if (users.find((u) => u.email === email)) {
          showAlert("Erreur", "Un compte avec cet email existe déjà.");
          return;
        }

        // Create new user
        const newUser = {
          id: Date.now(),
          name: name,
          email: email,
          phone: phone,
          password: password,
          address: "Douala, Cameroun",
          memberSince: new Date().getFullYear().toString(),
          totalOrders: 0,
          totalFormations: 0,
          loyaltyPoints: 50, // Welcome bonus
        };

        users.push(newUser);
        sessionStorage.setItem("users", JSON.stringify(users));

        currentUser = newUser;
        sessionStorage.setItem("currentUser", JSON.stringify(currentUser));

        updateAuthState();
        authModal.hide();
        showAlert(
          "Inscription réussie",
          `Bienvenue ${name} ! Vous avez reçu 50 points de bienvenue.`
        );
      }

      function updateAuthState() {
        if (currentUser) {
          // Hide auth buttons
          document.getElementById("authSection").classList.add("d-none");
          document.getElementById("authSectionMobile").classList.add("d-none");

          // Show user sections
          document.getElementById("userSection").classList.remove("d-none");
          document
            .getElementById("userSectionMobile")
            .classList.remove("d-none");

          // Update user avatars with first letter of name
          const firstLetter = currentUser.name.charAt(0).toUpperCase();
          document.getElementById("userAvatar").textContent = firstLetter;
          document.getElementById("userAvatarMobile").textContent = firstLetter;

          // Update mobile user info
          document.getElementById("userNameMobile").textContent =
            currentUser.name;
          document.getElementById("userEmailMobile").textContent =
            currentUser.email;

          // Update profile display if on profile page
          updateProfileDisplay();
        } else {
          // Show auth buttons
          document.getElementById("authSection").classList.remove("d-none");
          document
            .getElementById("authSectionMobile")
            .classList.remove("d-none");

          // Hide user sections
          document.getElementById("userSection").classList.add("d-none");
          document.getElementById("userSectionMobile").classList.add("d-none");
        }
      }

      function logout() {
        currentUser = null;
        sessionStorage.removeItem("currentUser");
        updateAuthState();
        cart = [];
        updateCartUI();
        showSection("home");
        showAlert("Déconnexion", "Vous avez été déconnecté avec succès.");
      }

      // Profile Functions
      function updateProfileDisplay() {
        if (!currentUser) return;

        // Update profile avatar
        const profileAvatar = document.getElementById("profileAvatar");
        if (profileAvatar) {
          profileAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
        }

        // Update profile information
        const elements = {
          profileName: currentUser.name,
          profileEmail: currentUser.email,
          displayName: currentUser.name,
          displayEmail: currentUser.email,
          displayPhone: currentUser.phone,
          displayAddress: currentUser.address,
          totalOrders: currentUser.totalOrders,
          totalFormations: currentUser.totalFormations,
          memberSince: currentUser.memberSince,
          loyaltyPoints: currentUser.loyaltyPoints,
        };

        Object.entries(elements).forEach(([id, value]) => {
          const element = document.getElementById(id);
          if (element) {
            element.textContent = value;
          }
        });
      }

      function confirmDeleteAccount() {
        confirmDeleteModal.show();
      }

      function deleteAccount() {
        if (!currentUser) return;

        // Remove user from users array
        const users = JSON.parse(sessionStorage.getItem("users") || "[]");
        const updatedUsers = users.filter((u) => u.id !== currentUser.id);
        sessionStorage.setItem("users", JSON.stringify(updatedUsers));

        // Remove user's orders
        const orders = JSON.parse(sessionStorage.getItem("orders") || "[]");
        const updatedOrders = orders.filter((o) => o.userId !== currentUser.id);
        sessionStorage.setItem("orders", JSON.stringify(updatedOrders));

        confirmDeleteModal.hide();
        logout();
        showAlert(
          "Compte supprimé",
          "Votre compte a été supprimé avec succès."
        );
      }

      // Orders Functions
      function loadOrders() {
        if (!currentUser) return;

        const orders = JSON.parse(sessionStorage.getItem("orders") || "[]");
        const userOrders = orders.filter(
          (order) => order.userId === currentUser.id
        );

        const container = document.getElementById("ordersContainer");

        if (userOrders.length === 0) {
          container.innerHTML = `
            <div class="glass-card p-4 text-center">
              <i class="bi bi-box" style="font-size: 3rem;"></i>
              <h5 class="mt-3">Aucune commande</h5>
              <p class="text-white-50">Vous n'avez pas encore passé de commande.</p>
              <button class="btn btn-primary-custom btn-custom" onclick="showSection('products')">
                Voir nos produits
              </button>
            </div>`;
          return;
        }

        container.innerHTML = userOrders
          .map(
            (order) => `
          <div class="glass-card order-card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5>Commande #${order.id}</h5>
                <span class="badge status-${order.status}">${getStatusText(
              order.status
            )}</span>
              </div>
              <div class="row">
                <div class="col-md-8">
                  <p><strong>Date:</strong> ${formatDate(order.date)}</p>
                  <p><strong>Articles:</strong></p>
                  <ul class="list-unstyled ms-3">
                    ${order.items
                      .map(
                        (item) =>
                          `<li>• ${item.name} - ${item.quantity}x ${item.price}€</li>`
                      )
                      .join("")}
                  </ul>
                </div>
                <div class="col-md-4 text-end">
                  <div class="product-price">${order.total} €</div>
                </div>
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function getStatusText(status) {
        const statusMap = {
          pending: "En attente",
          completed: "Terminée",
          cancelled: "Annulée",
        };
        return statusMap[status] || status;
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("fr-FR");
      }

      // Formation Functions
      function enrollFormation(formationType) {
        if (!currentUser) {
          showAlert(
            "Connexion requise",
            "Veuillez vous connecter pour vous inscrire à une formation."
          );
          openAuthModal();
          return;
        }

        const formations = {
          "import-export": "Formation Import Export (149 €)",
          smartphones: "Importation de Téléphones (99 €)",
          electronics: "Importation d'Électronique (129 €)",
          business: "Business Development (199 €)",
        };

        const formationName = formations[formationType] || "Formation";
        showAlert(
          "Inscription confirmée",
          `Vous êtes inscrit à la ${formationName}`
        );

        // Update user formations count
        currentUser.totalFormations += 1;
        sessionStorage.setItem("currentUser", JSON.stringify(currentUser));

        // Update users data
        const users = JSON.parse(sessionStorage.getItem("users") || "[]");
        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex >= 0) {
          users[userIndex] = currentUser;
          sessionStorage.setItem("users", JSON.stringify(users));
        }

        updateProfileDisplay();
      }

      // Contact Functions
      function contactVia(method) {
        switch (method) {
          case "email":
            window.location.href = "mailto:contact@dealbusiness.com";
            break;
          case "whatsapp":
            window.open("https://wa.me/237600000000", "_blank");
            break;
          case "location":
            showAlert(
              "Adresse",
              "Nous sommes basés à Douala, Cameroun. Contactez-nous pour plus de détails."
            );
            break;
        }
      }

      // Utility Functions
      function showAlert(title, message) {
        document.getElementById("alertTitle").textContent = title;
        document.getElementById("alertMessage").textContent = message;
        alertModal.show();
      }

      // Sync search inputs
      document.addEventListener("input", function (e) {
        if (e.target.id === "searchInput") {
          document.getElementById("offcanvasSearchInput").value =
            e.target.value;
        } else if (e.target.id === "offcanvasSearchInput") {
          document.getElementById("searchInput").value = e.target.value;
        }
      });
    </script>
  </body>
</html>
